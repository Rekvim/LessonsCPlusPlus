## –ü–æ—á–µ–º—É –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é –ª—É—á—à–µ. –°–º–æ—Ç—Ä–∏–º –∞—Å—Å–µ–º–±–ª–µ—Ä

–ö–æ–º–ø–∏–ª—è—Ç–æ—Ä—É –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä—É –≤—Å–µ–≥–¥–∞ –ø—Ä–æ—â–µ —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ç–µ–º, –æ —á—ë–º –æ–Ω –≤—Å—ë –∑–Ω–∞–µ—Ç. –ö–æ–≥–¥–∞ –æ–±—ä–µ–∫—Ç –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é, –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –∑–Ω–∞–µ—Ç, —á—Ç–æ —ç—Ç–æ –∑–∞ –æ–±—ä–µ–∫—Ç, –≥–¥–µ –æ–Ω —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω. –ò —Ç–æ—á–Ω–æ —É–≤–µ—Ä–µ–Ω, —á—Ç–æ –Ω–∏ –≤ –ø–æ—Ç–æ–∫–µ, –Ω–∏ –≤ –¥—Ä—É–≥–æ–º –º–µ—Å—Ç–µ –Ω–∏—á–µ–≥–æ –Ω–µ —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ —ç—Ç–æ—Ç –æ–±—ä–µ–∫—Ç –∏ –Ω–µ –º–æ–∂–µ—Ç –µ–≥–æ –∏–∑–º–µ–Ω–∏—Ç—å, –µ—Å–ª–∏ —ç—Ç–æ –Ω–µ –¥–µ–ª–∞–µ—Ç—Å—è —è–≤–Ω–æ. –ê –∫–æ–≥–¥–∞ –æ–±—ä–µ–∫—Ç –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –ø–æ —Å—Å—ã–ª–∫–µ, —Ç–∞–∫–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —É –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞ –Ω–µ—Ç.

#### –°—Å—ã–ª–∫–∞ –∏–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ
–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –¥–≤–µ —Ñ—É–Ω–∫—Ü–∏–∏:
```cpp
void AddToIntsRef(int& dst1, int& dst2, const int& val) {
    dst1 += val;
    dst2 += val;
}

void AddToIntsVal(int& dst1, int& dst2, int val) {
    dst1 += val;
    dst2 += val;
}
```
–î–ª—è –ª—é–±—ã—Ö –ª–∏ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ, –µ—Å–ª–∏ –Ω–µ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –≤–æ –≤–Ω–∏–º–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å? ‚Äî –û–±—ã—á–Ω–æ –æ–¥–∏–Ω–∞–∫–æ–≤–æ, –Ω–æ –ø—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤–∞—Ö –º–æ–≥—É—Ç —Å—Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ-—Ä–∞–∑–Ω–æ–º—É.

–†–∞–∑–ª–∏—á–∏–µ –º–µ–∂–¥—É —ç—Ç–∏–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –º–æ–∂–Ω–æ –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å, –∑–∞–ø—É—Å—Ç–∏–≤ —Ç–∞–∫–æ–π –∫–æ–¥:
```cpp
int main() {
    {
        int x = 10;
        AddToIntsVal(x, x, x);
        cout << "x –ø–æ—Å–ª–µ AddToIntsVal: "sv << x << endl;
    }

    {
        int x = 10;
        AddToIntsRef(x, x, x);
        cout << "x –ø–æ—Å–ª–µ AddToIntsRef: "sv << x << endl;
    }
}
```
–ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ —Ç–µ–ª–æ, —Ñ—É–Ω–∫—Ü–∏–∏ –∏–º–µ—é—Ç —Ä–∞–∑–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç. –≠—Ç–æ –≤–∏–¥–Ω–æ –∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã:
```
x –ø–æ—Å–ª–µ AddToIntsVal: 30
x –ø–æ—Å–ª–µ AddToIntsRef: 40
```
–ü–æ—á–µ–º—É –æ—Ç–≤–µ—Ç—ã —Ä–∞–∑–ª–∏—á–∞—é—Ç—Å—è? ‚Äî –í —Ñ—É–Ω–∫—Ü–∏–∏ AddToIntsRef –∏–∑–º–µ–Ω–µ–Ω–∏–µ dst1 –ø–æ–≤–ª–∏—è–ª–æ –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏–µ val.

–û—Ç–≤–µ—Ç 40 —è–≤–Ω–æ –Ω–µ –æ–∂–∏–¥–∞–ª—Å—è. –ù–æ —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞ —ç—Ç–æ –∏–º–µ–Ω–Ω–æ —Ç–æ, —á—Ç–æ –º—ã –Ω–∞–ø–∏—Å–∞–ª–∏. –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –Ω–µ –∑–Ω–∞–µ—Ç –≤–∞—à–∏—Ö –ø–ª–∞–Ω–æ–≤: –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –≤—ã –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Å–æ–±–∏—Ä–∞–µ—Ç–µ—Å—å –≤—ã–∑—ã–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é —Ç–∞–∫, —á—Ç–æ–±—ã –ø–∞–º—è—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–ª–∞—Å—å, –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –≤—Å—ë —Ä–∞–≤–Ω–æ –≤—ã–Ω—É–∂–¥–µ–Ω —Å–æ–∑–¥–∞—Ç—å –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —É—á–∏—Ç—ã–≤–∞—Ç—å –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤, –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö –ø–æ —Å—Å—ã–ª–∫–µ. –≠—Ç–æ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ –≤–ª–∏—è–µ—Ç –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å. –£–±–µ–¥–∏–º—Å—è, –µ—Å–ª–∏ –≤–∑–≥–ª—è–Ω–µ–º –Ω–∞ –∞—Å—Å–µ–º–±–ª–µ—Ä–Ω—ã–π –∫–æ–¥, —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π GCC –¥–ª—è —ç—Ç–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –µ–≥–æ –º–æ–∂–Ω–æ –Ω–∞ —Å–∞–π—Ç–µ Compiler Explorer. –í–¥–∞–≤–∞—Ç—å—Å—è –≤ –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –Ω–µ –±—É–¥–µ–º, –ø—Ä–æ—Å—Ç–æ –æ—Ü–µ–Ω–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π:
```
AddToIntsRef:
        movl    (%rdx), %eax
        addl    %eax, (%rdi)
        movl    (%rdx), %eax
        addl    %eax, (%rsi)
        ret
AddToIntsVal:
        addl    %edx, (%rdi)
        addl    %edx, (%rsi)
        ret
```

–ü–æ–º–∏–º–æ —Ç–æ–≥–æ, —á—Ç–æ —Å–æ–¥–µ—Ä–∂–∞—Ç–µ–ª—å–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ –ø–æ —Å—Å—ã–ª–∫–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å –≤ –¥–≤–∞ —Ä–∞–∑–∞ –±–æ–ª—å—à–µ, –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä—É –ø—Ä–∏—à–ª–æ—Å—å –ª–∏—à–Ω–∏–π —Ä–∞–∑ —Å–æ–≤–µ—Ä—à–∏—Ç—å –¥–æ—Ä–æ–≥–æ—Å—Ç–æ—è—â—É—é –æ–ø–µ—Ä–∞—Ü–∏—é –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ –ø–∞–º—è—Ç–∏. –í–æ—Ç —Ç–∞–∫, –ø–æ—Å–º–æ—Ç—Ä–µ–≤ –∞—Å—Å–µ–º–±–ª–µ—Ä–Ω—ã–π –∫–æ–¥ –ø—Ä–æ–≥—Ä–∞–º–º—ã, —É–±–µ–¥–∏–ª–∏—Å—å: –ª—É—á—à–µ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é.

üìñ  –í –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞—Ö C++ –µ—Å—Ç—å –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ç–æ—Ä `__restrict` –∏–ª–∏ `__restrict__`. –ù–∞–ø–∏—Å–∞–≤ –µ–≥–æ –ø–æ—Å–ª–µ —Å—Å—ã–ª–∫–∏ –∏–ª–∏ —É–∫–∞–∑–∞—Ç–µ–ª—è, –≤—ã –ø–æ–∑–≤–æ–ª–∏—Ç–µ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä—É —Å—á–∏—Ç–∞—Ç—å, —á—Ç–æ –≤–ª–∞–¥–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω–æ–µ, —Ç–æ –µ—Å—Ç—å –Ω–∞ –Ω–µ—ë –Ω–∏—á–µ–≥–æ –±–æ–ª—å—à–µ –Ω–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç. –°–∏–≥–Ω–∞—Ç—É—Ä–∞ —Ñ—É–Ω–∫—Ü–∏–∏ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–∞–∫–æ–π: `void AddToIntsRef(int& __restrict dst1, int& __restrict dst2, const int& __restrict val)`. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –∏—Å–∫–ª—é—á–∏—Ç –ª–∏—à–Ω–µ–µ —á—Ç–µ–Ω–∏–µ. –û–¥–Ω–∞–∫–æ –µ—Å–ª–∏ –≤—ã –Ω–∞—Ä—É—à–∏—Ç–µ —É—Å–ª–æ–≤–∏–µ –∏ –≤—ã–∑–æ–≤–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é —Ç–∞–∫, –∫–∞–∫ –≤ –ø—Ä–∏–º–µ—Ä–µ, —Ç–æ —ç—Ç–æ –ø—Ä–∏–≤–µ–¥—ë—Ç –∫ –Ω–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–º—É –ø–æ–≤–µ–¥–µ–Ω–∏—é.

#### –°—Å—ã–ª–∫–∞ –∏–ª–∏ —É–∫–∞–∑–∞—Ç–µ–ª—å

–ú—ã —É–≤–∏–¥–µ–ª–∏, —á—Ç–æ –ø–µ—Ä–µ–¥–∞—á–∞ –ø–æ —Å—Å—ã–ª–∫–µ –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–µ–π, —á–µ–º –ø–µ—Ä–µ–¥–∞—á–∞ –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é ‚Äî –æ–Ω–∞ —Ç—Ä–µ–±—É–µ—Ç –ª–∏—à–Ω–∏—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π. –ü—Ä–æ–≤–µ—Ä–∏–º, –∫–∞–∫ –æ–±—Å—Ç–æ–∏—Ç –¥–µ–ª–æ, –µ—Å–ª–∏ —Å—Å—ã–ª–∫–∏ –∑–∞–º–µ–Ω–∏—Ç—å —É–∫–∞–∑–∞—Ç–µ–ª—è–º–∏. –î–æ–±–∞–≤–∏–º —Ç–∞–∫–æ–π –∞–Ω–∞–ª–æ–≥ —Ñ—É–Ω–∫—Ü–∏–∏ `AddToIntsRef`:
```cpp
void AddToIntsPtr(int* dst1, int* dst2, const int* val) {
    *dst1 += *val;
    *dst2 += *val;
}
```
–ò —Å—Ä–∞–≤–Ω–∏–º –∞—Å—Å–µ–º–±–ª–µ—Ä–Ω—ã–π –∫–æ–¥ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ —Å–æ —Å—Å—ã–ª–æ—á–Ω–æ–π –≤–µ—Ä—Å–∏–µ–π:
```
AddToIntsRef:
        movl    (%rdx), %eax
        addl    %eax, (%rdi)
        movl    (%rdx), %eax
        addl    %eax, (%rsi)
        ret
AddToIntsPtr:
        movl    (%rdx), %eax
        addl    %eax, (%rdi)
        movl    (%rdx), %eax
        addl    %eax, (%rsi)
        ret
```
–û–±—ä–µ–∫—Ç–Ω—ã–π –∫–æ–¥ —ç—Ç–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π –∏–¥–µ–Ω—Ç–∏—á–Ω—ã–π. –ó–Ω–∞—á–∏—Ç, —Å—Å—ã–ª–∫–∏ ‚Äî —ç—Ç–æ –≤—Å–µ–≥–æ –ª–∏—à—å —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–π —Å–∞—Ö–∞—Ä, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–µ –ø–∏—Å–∞—Ç—å –ª–∏—à–Ω–∏–π —Ä–∞–∑ –∑–Ω–∞–∫ `*` –∏–ª–∏ `&` –∏ –ø—Ä–∏ —ç—Ç–æ–º –Ω–µ –∏–º–µ–µ—Ç –æ–≤–µ—Ä—Ö–µ–¥–∞.

üìñ  –û—Ç–ª–∏—á–∏–µ —Å—Å—ã–ª–∫–∏ –æ—Ç —É–∫–∞–∑–∞—Ç–µ–ª—è –≤ —Ç–æ–º, —á—Ç–æ —Å—Å—ã–ª–∫–∞ –æ–±—è–∑–∞–Ω–∞ —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –æ–±—ä–µ–∫—Ç. –í —ç—Ç–æ –≤—Ä–µ–º—è —É–∫–∞–∑–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω—É–ª–µ–≤—ã–º –∏–ª–∏ –∏–º–µ—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ, –Ω–µ —Å–≤—è–∑–∞–Ω–Ω–æ–µ –Ω–∏ —Å –∫–∞–∫–∏–º –æ–±—ä–µ–∫—Ç–æ–º. –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–ª—É—á–∞—è—Ö –æ–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä –º–æ–∂–µ—Ç —Å–¥–µ–ª–∞—Ç—å –∫–æ–¥ —Å–æ —Å—Å—ã–ª–∫–æ–π –¥–∞–∂–µ –±—ã—Å—Ç—Ä–µ–µ ‚Äî —É –Ω–µ–≥–æ –µ—Å—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è. –°–∏–≥–Ω–∞—Ç—É—Ä–∞ —Ñ—É–Ω–∫—Ü–∏–∏, –ø—Ä–∏–Ω–∏–º–∞—é—â–µ–π —Å—Å—ã–ª–∫—É, —è–≤–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∞–¥—Ä–µ—Å–∞ –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã.

–í —Å–ª–µ–¥—É—é—â–µ–º —É—Ä–æ–∫–µ –ø—Ä–æ–≤–µ—Ä–∏–º, –Ω–∞—Å–∫–æ–ª—å–∫–æ –≤–µ–ª–∏–∫–∞ —Ä–∞–∑–Ω–∏—Ü–∞ –≤ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –µ—Å–ª–∏ –≤–º–µ—Å—Ç–æ –ø–µ—Ä–µ–¥–∞—á–∏ –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é –≤—ã–±—Ä–∞—Ç—å –ø–µ—Ä–µ–¥–∞—á—É –ø–æ —Å—Å—ã–ª–∫–µ —Ç–∞–º, –≥–¥–µ —ç—Ç–æ —Å–æ–≤–µ—Ä—à–µ–Ω–æ –Ω–µ –Ω—É–∂–Ω–æ.
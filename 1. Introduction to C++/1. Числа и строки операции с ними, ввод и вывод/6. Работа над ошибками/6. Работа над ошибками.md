## Работа над ошибками

В прошлом уроке вы увидели, как выглядят сообщения об ошибках компиляции. В этом уроке подробнее разберём, что компилятор пытался сказать в последнем задании.

Код, возмутивший компилятор:
```cpp
#include <io_stream>

/* using namespace std; */

int ma() {
    int x;
    cin >> x, y;

    z = 1;
    cout << 'Your answer: ';
}

cout < x + y + z;
```
Чтобы скомпилировать эту программу, тренажёр Практикума использует компилятор g++ с параметрами `-std=c++17 -Wall -Wextra -pedantic -Werror`. Параметры указывают компилятору, какую версию C++ использовать, и заставляют строго относиться не только к ошибкам, но и подозрительным местам в коде. Так вы сможете найти ряд ошибок ещё во время компиляции программы, не запуская её.

Компилируя программу с этими настройками, вы полу́чите сообщение об ошибке:
```
test.cpp:1:10: fatal error: io_stream: No such file or directory
 #include <io_stream>
          ^~~~~~~~~~~
compilation terminated.
```
Заголовочный файл `io_stream` не найден, так как название написано неверно. Всего-то. Достаточно исправить на iostream и скомпилировать снова. Но сообщений об ошибках стало больше:
```
test.cpp:10:13: error: character constant too long for its type [-Werror]
     cout << 'Your answer: ';
             ^~~~~~~~~~~~~~~
test.cpp: In function ‘int ma()’:
test.cpp:7:5: error: ‘cin’ was not declared in this scope
     cin >> x, y;
     ^~~
test.cpp:7:5: note: suggested alternative:
In file included from test.cpp:1:0:
/usr/include/c++/7/iostream:60:18: note:   ‘std::cin’
   extern istream cin;  /// Linked to standard input
                  ^~~
test.cpp:7:15: error: ‘y’ was not declared in this scope
     cin >> x, y;
               ^
test.cpp:9:5: error: ‘z’ was not declared in this scope
     z = 1;
     ^
test.cpp:10:5: error: ‘cout’ was not declared in this scope
     cout << 'Your answer: ';
     ^~~~
test.cpp:10:5: note: suggested alternative:
In file included from test.cpp:1:0:
/usr/include/c++/7/iostream:61:18: note:   ‘std::cout’
   extern ostream cout;  /// Linked to standard output
                  ^~~~
test.cpp:11:1: error: no return statement in function returning non-void [-Werror=return-type]
 }
 ^
test.cpp: At global scope:
test.cpp:13:1: error: ‘cout’ does not name a type
 cout < x + y + z;
 ^~~~
cc1plus: all warnings being treated as errors
```
В некоторых сообщениях об ошибках вы видите фрагменты кода своей программы, а в других — фрагменты кода, который явно писали не вы. Это строки библиотечного кода. Они добавляются, когда вы используете директиву #include. 

Когда работаете в тренажёре Практикума, в некоторых заданиях он может подключить к вашей программе и другие библиотеки, чтобы проверить её работу. О том, как это делается, вы узнаете в курсе.

Первая ошибка character constant too long for its type говорит, что символьная константа 'Your answer: ' слишком длинная. Последовательности символов внутри одинарных кавычек задают символьный литерал. Они ещё встретятся дальше в курсе. Строки в С++ надо заключать в двойные кавычки: `"Your answer: "s`.

Следующая ошибка сообщает, что `cin` не определён. Всё потому, что команда `using namespace std;` закомментирована. В ближайших уроках всегда используйте ди`рективу using namespace std`.

После исправления ошибок код выглядит так:

```cpp
#include <iostream>

using namespace std;

int ma() {
    int x;
    cin >> x, y;

    z = 1;
    cout << "Your answer: ";
}

cout < x + y + z; 
```

Теперь компилятор выдаст новые сообщения об ошибках:
```
test.cpp: In function ‘int ma()’:
test.cpp:7:15: error: ‘y’ was not declared in this scope
     cin >> x, y;
               ^
test.cpp:9:5: error: ‘z’ was not declared in this scope
     z = 1;
     ^
test.cpp:11:1: error: no return statement in function returning non-void [-Werror=return-type]
 }
 ^
test.cpp: At global scope:
test.cpp:13:1: error: ‘cout’ does not name a type
 cout < x + y + z;
 ^~~~
cc1plus: all warnings being treated as errors
```
Переменные `y` и `z` не определены. В C++ объявлять переменную нужно обязательно.

Ошибка: "no return statement in function returning non-void" вам уже знакома: имя функции было `ma` вместо `main`. Вообще, `ma` — допустимое, хоть и непонятное, имя функции. Но в ней компилятору не понравилось отсутствие `return`. Чтобы исправить ошибку, надо вместо ma написать `main`.

После исправления новой порции ошибок код выглядит так:
```cpp
#include <iostream>

using namespace std;

int main() {
    int x, y;
    cin >> x, y;

    int z = 1;
    cout << "Your answer: ";
}

cout < x + y + z;
```
И снова не компилируется:
```
test.cpp: In function ‘int main()’:
test.cpp:7:16: error: right operand of comma operator has no effect [-Werror=unused-value]
     cin >> x, y;
                ^
test.cpp:9:9: error: unused variable ‘z’ [-Werror=unused-variable]
     int z = 1;
         ^
test.cpp: At global scope:
test.cpp:13:1: error: ‘cout’ does not name a type
 cout < x + y + z;
 ^~~~
cc1plus: all warnings being treated as errors
```
Здесь некорректно написан код считывания нескольких значений: `cin >> x, y;` вместо `cin >> x >> y;`. Остаётся ещё несколько ошибок:
```
test.cpp: In function ‘int main()’:
test.cpp:9:9: error: unused variable ‘z’ [-Werror=unused-variable]
     int z = 1;
         ^
test.cpp: At global scope:
test.cpp:13:1: error: ‘cout’ does not name a type
 cout < x + y + z;
 ^~~~
cc1plus: all warnings being treated as errors 
```
Компилятору не нравится, что переменная `z` не используется. Она есть в выражении, только выражение стоит вне функции `main`, и компилятор `z` не видит. Переменная видна только внутри фигурных скобок, где определена. Более того, сама команда `cout < x + y + z;` за пределами `main` уже не считается командой. Нужно перенести её внутрь функции `main`:
```cpp
#include <iostream>

using namespace std;

int main() {
    int x, y;
    cin >> x >> y;

    int z = 1;
    cout << "Your answer: ";

    cout < x + y + z;
} 
```
Новая ошибка:
```
test.cpp:11:10: error: no match for ‘operator<’ (operand types are ‘std::ostream 
{aka std::basic_ostream<char>}’ and ‘int’)
     cout < x + y + z;
     ~~~~~^~~~~~~~~~~
```

В строке с `cout` неправильный оператор: вместо `<<` написан `<`. После исправления всех ошибок получится программа:

```cpp
#include <iostream>

using namespace std;

int main() {
    int x, y;
    cin >> x >> y;

    int z = 1;
    cout << "Your answer: ";

    cout << x + y + z;
}
```

Она без проблем скомпилируется и заработает.

Ошибки могут испугать. Отчасти потому, что затрагивают ещё не известные вам принципы работы C++. Но большинство ошибок вы можете исправлять уже сейчас. Просто приглядитесь, в каких строках они допущены, и немного поразмыслите.
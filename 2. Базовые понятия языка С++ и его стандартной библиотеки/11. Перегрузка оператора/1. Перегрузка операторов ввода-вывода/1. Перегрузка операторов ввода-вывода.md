## Перегрузка операторов ввода-вывода

Начав использовать в коде собственные типы данных, вы быстро поймёте, что надо вводить и выводить классы и структуры, которые позволяют программе оперировать такими типами. Для этого используют перегрузку.

Перегрузка операторов позволяет нескольким вариантам использования оператора одновременно существовать в одной области видимости. Имя у вариантов одинаковое, а типы параметров, к которым они применяются, — разные.

Термин «перегрузка» — не слишком удачная калька с overloading. Перегружая операторы, мы не взваливаем на них непосильную ношу. Это просто способ объявить в одной области видимости операции с одинаковыми названиями.

Но с перегрузкой нужно обращаться осторожно. Используйте её, только если она не усложнит чтение программы. Ваш код должен быть понятен другим разработчикам, и на это несколько причин:
- скорее всего, вы будете трудиться в команде;
- вы или ваши коллеги не раз станете рефакторить код;
- вы можете захотеть поделиться своей программой в GitHub.

Перегрузка предназначена для пользовательских типов и классов. 

В прошлых уроках вы познакомились с перегрузкой операций вывода для контейнеров `vector`, `set` и `map`. Аналогично можно перегрузить оператор << для ваших собственных классов, структур и перечислимых типов.

Оператор вывода в поток `<<` принимает два аргумента:
- ссылку на поток вывода ostream. Буква "o" в имени означает `output`.
- объект, выводимый в поток. Легковесные объекты передавайте по значению, а тяжеловесные — по константной ссылке.

Оператор `<<` должен возвращать ссылку на переданный ему поток, чтобы вывод нескольких объектов можно было объединять в цепочки вида `cout << value1 << value2`:
```cpp
ostream& operator<<(ostream& output, MyValue value) {
    /* Выводим содержимое объекта value в output */

    // Оператор должен вернуть ссылку на переданный поток вывода
    return output;
} 
```
Оператор чтения из потока `>>` также принимает два аргумента:
- cсылку на поток ввода `istream`. Буква `i` в имени означает input.
- cсылку на объект, считываемый из потока.
Оператор `>>` должен возвращать ссылку на переданный ему поток для объединения чтения нескольких объектов в цепочку: `cin >> value1 >> value2`:
```
istream& operator>>(istream& input, MyValue& value) {
    /* Считываем из потока input значение объекта value */

    // Оператор должен вернуть ссылку на переданный поток ввода
    return input;
}
```
Рассмотрим перегрузку операций ввода и вывода для структуры `Point`. Чтобы упростить код, обработка ошибок опущена:
```cpp
struct Point {
    int x;
    int y;
};

// вывод
ostream& operator<<(ostream& output, Point point) {
    output << point.x << ","s << point.y;
    return output;
}

// ввод
istream& operator>>(istream& input, Point& point) {
    int x, y;
    char comma; // переменная для считывания запятой
    input >> x >> comma >> y;
    point = Point{x, y};
    return input;
} 
```
Теперь вы можете справиться с операторами `<<` и `>>` языка С++.